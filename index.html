<html>
    <head>
        <meta charset="utf-8">
        <title>My first three.js app</title>
        <style>
            body {margin: 0; }
            canvas {width: 100%; height: 100% }
            .info-panel {
                position: absolute;
                top: 10px;
                text-align: left;
                z-index: 100;
                color: white;
                display: block;
            }
            #controls {
                padding-bottom: 10px;
            }
        </style>
    </head>
        <body>
            <script src="js/three.js"></script>
            <script src="js/OrbitControls.js"></script>
            <script src="js/main.js"></script>
            <div class="info-panel">
                <div id="controls">
                    <b>Controls</b><br />
                    Left click - Orbit around cube<br />
                    Middle Mouse - Zoom in/out<br />

                    A/D - Expand/contract fractal<br />
                    <br />
                    Depth:
                    <input id="depth-input" type="number"/>
                </div>
                <div id="info"></div>
            </div>
        <script>

        var depth = urlParams.get('depth');
        if (!Number(depth)) {
            depth = 2;
        }

        const depthInput = document.getElementById("depth-input");
        depthInput.value = depth;

        depthInput.addEventListener("input", (e) => {
            var newDepth = e.target.value;
            if (!!Number(newDepth) && newDepth > 0) {
                var url = new URL(window.location.href);
                var query_string = url.search;
                var search_params = new URLSearchParams(query_string); 

                search_params.set('depth', newDepth);

                url.search = search_params.toString();
                var new_url = url.toString();

                window.location.href = new_url;
            } 
        })
        </script>
    </body>
</html>